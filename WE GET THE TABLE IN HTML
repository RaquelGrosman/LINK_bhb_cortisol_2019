<html>
<head>
  <!-- Initialize a global WBK function -->
  <script src="https://cdn.rawgit.com/maxlath/wikidata-sdk/dist/dist/wikibase-sdk.min.js"></script>
  <!-- Initialize a global wdk object using the WBK object -->
  <script src="https://cdn.rawgit.com/maxlath/wikidata-sdk/dist/dist/wikidata-sdk.min.js"></script>
</head>

<body>
<div id="foo" />
<script>

url = "http://sparql.wikipathways.org/"

query = `
PREFIX wdt: <http://www.wikidata.org/prop/direct/>                   
PREFIX wd:  <http://www.wikidata.org/entity/>                  
SELECT  ?inchikey ?hgnc                                              
WHERE {                                                              
  SERVICE <https://query.wikidata.org/sparql>   
  {
    VALUES ?wikidata { wd:Q190875 }                                  
    ?wikidata wdt:P235 ?inchikey .                                                                                             
 }
  ?metabolite a wp:Metabolite ;                                
              rdfs:label ?metaboliteLabel ;
              wp:bdbWikidata ?wikidata ;
              dcterms:isPartOf ?pathway .                       
  ?pathway a wp:Pathway ;                                      
           foaf:page ?homepage .                               
  ?protein a wp:Protein ;
              rdfs:label ?proteinLabel ;
              wp:bdbHgncSymbol ?hgnc;                          
              dcterms:isPartOf ?pathway .
 ?pathway wp:organismName "Homo sapiens"^^xsd:string .
}
`
var queryUrl = encodeURI( url+"?query="+query );
fetch( queryUrl, {headers: {"Accept": 'application/json'}} )
  .then( response => response.json() )
  .then( wdk.simplify.sparqlResults )
  .then( function (response) {
      console.log(
        JSON.stringify(response, undefined, 2)
      )
	  document.getElementById("data").innerHTML =  JSON.stringify(response, undefined, 2) 
		var data = response
    }
  )
  
  </script>
  
  
  <div id="data">
  
  
  </div>
  </body>
</html>
